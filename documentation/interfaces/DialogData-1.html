<!doctype html>
<html class="no-js" lang="">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>ng-ui documentation</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <link rel="icon" type="image/x-icon" href="../images/favicon.ico">
	      <link rel="stylesheet" href="../styles/style.css">
    </head>
    <body>

        <div class="navbar navbar-default navbar-fixed-top visible-xs">
            <a href="../" class="navbar-brand">ng-ui documentation</a>
            <button type="button" class="btn btn-default btn-menu ion-ios-menu" id="btn-menu"></button>
        </div>

        <div class="xs-menu menu" id="mobile-menu">
                <div id="book-search-input" role="search"><input type="text" placeholder="Type to search"></div>            <compodoc-menu></compodoc-menu>
        </div>

        <div class="container-fluid main">
           <div class="row main">
               <div class="hidden-xs menu">
                   <compodoc-menu mode="normal"></compodoc-menu>
               </div>
               <!-- START CONTENT -->
               <div class="content interface">
                   <div class="content-data">












<ol class="breadcrumb">
  <li>Interfaces</li>
  <li>DialogData</li>
</ol>

<ul class="nav nav-tabs" role="tablist">
        <li class="active">
            <a href="#info" role="tab" id="info-tab" data-toggle="tab" data-link="info">Info</a>
        </li>
        <li >
            <a href="#source" role="tab" id="source-tab" data-toggle="tab" data-link="source">Source</a>
        </li>
</ul>

<div class="tab-content">
    <div class="tab-pane fade active in" id="c-info">
        <p class="comment">
            <h3>File</h3>
        </p>
        <p class="comment">
            <code>src/app/project/project-submission/project-submission.component.ts</code>
        </p>



        <section>
            <h3 id="index">Index</h3>
            <table class="table table-sm table-bordered index-table">
                <tbody>
                    <tr>
                        <td class="col-md-4">
                            <h6><b>Properties</b></h6>
                        </td>
                    </tr>
                    <tr>
                        <td class="col-md-4">
                            <ul class="index-list">
                                <li>
                                        <a href="#questionType">questionType</a>
                                </li>
                                <li>
                                        <a href="#result">result</a>
                                </li>
                                <li>
                                        <a href="#title">title</a>
                                </li>
                            </ul>
                        </td>
                    </tr>
                </tbody>
            </table>
        </section>



            <section>
                <h3 id="inputs">Properties</h3>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="questionType"></a>
                                        <span class="name"><b>questionType</b><a href="#questionType"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>questionType:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="result"></a>
                                        <span class="name"><b>result</b><a href="#result"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>result:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
                    <table class="table table-sm table-bordered">
                        <tbody>
                                <tr>
                                    <td class="col-md-4">
                                        <a name="title"></a>
                                        <span class="name"><b>title</b><a href="#title"><span class="icon ion-ios-link"></span></a></span>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="col-md-4">
                                        <code>title:     <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>
</code>
                                    </td>
                                </tr>


                                    <tr>
                                        <td class="col-md-4">
                                            <i>Type : </i>    <code><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/string" target="_blank" >string</a></code>

                                        </td>
                                    </tr>





                        </tbody>
                    </table>
            </section>
    </div>


    <div class="tab-pane fade  tab-source-code" id="c-source">
        <pre class="line-numbers compodoc-sourcecode"><code class="language-typescript">import { Component, OnInit } from &#x27;@angular/core&#x27;;
import { MatDialog, MatSnackBar } from &#x27;@angular/material&#x27;;
import { Router } from &#x27;@angular/router&#x27;;
import { NgMetaService } from &#x27;ngmeta&#x27;;

import { InputDialogComponent } from &#x27;./input-dialog/input-dialog.component&#x27;;
import { Project } from &#x27;src/app/core/models/Project&#x27;;
import { ProjectService } from &#x27;src/app/core/services/project.service&#x27;;
import { UserService } from &#x27;src/app/core/services/user.service&#x27;;

// this interface represents data to be held and returned from an input dialog
export interface DialogData {
  title: string;
  questionType: string;
  result: string;
}

@Component({
  selector: &#x27;app-project-submission&#x27;,
  templateUrl: &#x27;./project-submission.component.html&#x27;,
  styleUrls: [&#x27;./project-submission.component.scss&#x27;]
})
export class ProjectSubmissionComponent implements OnInit {
  // projectToUpload is bound to the information that users enter in the form
  projectToUpload: Project &#x3D; {};

  // validScreenshots and validGithubURL determine if information has been entered correctly and if the form can be submitted
  validScreenshots &#x3D; false;
  validGithubURL &#x3D; false;
  invalidLink &#x3D; false; // triggers an error message if set to true

  /**
   * title, questionType, and result are all passed to a dialog when the user chooses either the group member or the links input field
   * title and questionType represent the information which will displayed in an input dialog
   * result will hold the user&#x27;s response, either a group member or a link to be validated as a Github repository link
   * @author Shawn Bickel (1810-Oct08-Java-USF)
   */
  title: string;
  questionType: string;
  result: string;

  /**
   * groupMemberString and zipLinkString are both bound to the user&#x27;s input of the group member field and the zip links field
   * When a new group member or zip link is added, then that information is concatenated to the string.
   * Because of two-way binding, the result is placed in either the group member field or the zip links field
   * @author Shawn Bickel (1810-Oct08-Java-USF)
   */
  groupMemberString: string;
  zipLinksString: string;

  /**
   * githubURLRegex: holds the regular expression to validate that an entered link is formatted correctly
   *    - a valid link is of the format: https://github.com/&lt;github username&gt;/&lt;repository name&gt;
   *    - the regular expression used to validate this is: ^(https:\/\/github\.com\/[^/]+\/[^/]+)
   *    - this expression is checking that the link contains https://github.com/at least one of &lt;any character but a &#x27;/&#x27;&gt;/at least one of &lt;any character but a &#x27;/&#x27;&gt;&#x60;
   * githubURL: a string to hold the user&#x27;s input from the dialog
   *  @author Shawn Bickel (1810-Oct08-Java-USF)
   */
  githubURLRegex: RegExp;
  githubURL: string;

  constructor(private router: Router,
              private ngmeta: NgMetaService,
              private dialog: MatDialog,
              private projectService: ProjectService,
              private snackBar: MatSnackBar,
              private userService: UserService) {}

  ngOnInit() {
    if (this.userService.getUser() &#x3D;&#x3D;&#x3D; null) {
      this.router.navigate([&#x27;/auth/login&#x27;]);
    } else {
      this.ngmeta.setHead({ title: &#x27;Submit | RPM&#x27; });
      this.projectToUpload.groupMembers &#x3D; [];
      this.projectToUpload.screenShots &#x3D; [];
      this.projectToUpload.zipLinks &#x3D; [];
      this.groupMemberString &#x3D; &#x27;&#x27;;
      this.zipLinksString &#x3D; &#x27;&#x27;;
      this.githubURLRegex &#x3D; new RegExp(&#x27;^(https:\/\/github\.com\/[^/]+\/[^/]+)&#x27;);
    }
  }

  /**
   * this method opens the dialog defined in the input-dialog component;
   * after the dialog is closed the user&#x27;s data is placed in the groupMembers array
   * or the zipLinks array depending on which field was clicked
   * @param e: the event of clicking either the group member or zip links fields, which both trigger the dialog to open
   * @author Shawn Bickel (1810-Oct08-Java-USF)
   */
  openDialog(e): void {
    // determine which input was clicked, the group members field or the zip links field
    if (e.target.id &#x3D;&#x3D; &#x27;inputGroupMembers&#x27;) {
      this.title &#x3D; &#x27;New Group Member&#x27;;
      this.questionType &#x3D; &#x27;Enter the name of the group member&#x27;;
    } else {
      this.title &#x3D; &#x27;Repository Link&#x27;;
      this.questionType &#x3D; &#x27;Enter the Github URL of your repository&#x27;;
    }

    // open the dialog contained in the InputDialogComponent passing the data to be displayed in the dialog
    const dialogRef &#x3D; this.dialog.open(InputDialogComponent, {
      width: &#x27;250px&#x27;,
      data: {title: this.title, questionType: this.questionType, result: this.result}
    });

    // when the dialog is closed, the data is returned as an observable
    dialogRef.afterClosed().subscribe(result &#x3D;&gt; {
      // only proceed if the user entered information
      if (result !&#x3D;&#x3D; undefined &amp;&amp; result !&#x3D;&#x3D; null) {

        // if the user chose to add a group member, then place the input into the groupMembers array corresponding to the project to submit
        if (e.target.id &#x3D;&#x3D; &#x27;inputGroupMembers&#x27;) {
          this.projectToUpload.groupMembers.push(result);
          this.groupMemberString &#x3D; this.projectToUpload.groupMembers.join(&#x27;, &#x27;);
        } else {
          this.githubURL &#x3D; result;

         // find the exact match in the string corresponding to the github repository regular expression
         const regexArr &#x3D; this.githubURL.match(this.githubURLRegex);

         /**
          * If the string contains no matches related to the regex or
          * if the length of the input is greater than the match, then the link is not valid.
          * If the matched portion of the URL is only a subset of the entire URL, then we know that the URL is not valid.
          * The length of a valid URL will equal the length of the match found in the string corresponding the the regular expression.
          * All links are unique
          */
          if (this.githubURLRegex.test(this.githubURL) &#x3D;&#x3D; false || this.githubURL.length !&#x3D; regexArr[0].length) {
            this.invalidLink &#x3D; true;
            return;
          }

          //  All links are unique
          if (this.projectToUpload.zipLinks.includes(result)) {
            return;
          }

          // at this point, the URL will be valid and will be placed in the array
          // corresponding to the zip links array of the project to be submitted
          this.validGithubURL &#x3D; true;
          this.invalidLink &#x3D; false;
          this.projectToUpload.zipLinks.push(result);
          this.zipLinksString +&#x3D; result + &#x27; &#x27;;
        }
      }
    });
  }

  /**
   * This method is bound to the event that the form is submitted;
   * all the data of the form is placed as key/value pairs into a FormData object;
   * this FormData object is then sent to the server as a post request to create a new project
   * @author Shawn Bickel (1810-Oct08-Java-USF)
   */
  submitForm() {
    // FormData is used to hold form fields and their values as key/value pairs to easily transfer data in a form
    const formData &#x3D; new FormData();

    // append the data of the form as key/value pairs using field names on the server as keys and data in the form as values
    formData.append(&#x27;name&#x27;, this.projectToUpload.name);
    formData.append(&#x27;batch&#x27;, this.projectToUpload.batch);
    formData.append(&#x27;trainer&#x27;, this.projectToUpload.trainer);
    formData.append(&#x27;techStack&#x27;, this.projectToUpload.techStack);
    formData.append(&#x27;description&#x27;, this.projectToUpload.description);
    formData.append(&#x27;status&#x27;, &#x27;pending&#x27;);

    console.log(this.projectToUpload);

    // elements of an array are appended to the FormData object using the same key name
    for (let i &#x3D; 0; i &lt; this.projectToUpload.groupMembers.length; i++) {
      formData.append(&#x27;groupMembers&#x27;, this.projectToUpload.groupMembers[i]);
    }

    for (let j &#x3D; 0; j &lt; this.projectToUpload.screenShots.length; j++) {
      formData.append(&#x27;screenShots&#x27;, this.projectToUpload.screenShots[j]);
    }

    for (let k &#x3D; 0; k &lt; this.projectToUpload.zipLinks.length; k++) {
      formData.append(&#x27;zipLinks&#x27;, this.projectToUpload.zipLinks[k]);
    }

    // the FormData object is then sent to a service where it is submitted to the server as an http post request
    this.projectService.createProject(formData).subscribe(project &#x3D;&gt; {});
    window.location.reload();
    this.router.navigate([&#x27;/home&#x27;]);
  }

  /**
   * When the file input is triggered, the event is passed to this method
   * which uses the properties of the event to retrieve the files chosen and
   * place them in the array corresponding to the screenShots array of the project to be submitted
   *
   * @param e the event corresponding to the user choosing a screenshot to uplodad
   */
  onFileSelected(e) {
    for (let i &#x3D; 0; i &lt; e.target.files.length; i++) {
      this.projectToUpload.screenShots.push(e.target.files[i]);
      this.validScreenshots &#x3D; true;
    }
  }
}
</code></pre>
    </div>
</div>






                   </div><div class="search-results">
    <div class="has-results">
        <h1 class="search-results-title"><span class='search-results-count'></span> result-matching "<span class='search-query'></span>"</h1>
        <ul class="search-results-list"></ul>
    </div>
    <div class="no-results">
        <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
    </div>
</div>
</div>
               <!-- END CONTENT -->
           </div>
       </div>

       <script>
            var COMPODOC_CURRENT_PAGE_DEPTH = 1;
            var COMPODOC_CURRENT_PAGE_CONTEXT = 'interface';
            var COMPODOC_CURRENT_PAGE_URL = 'DialogData-1.html';
       </script>

       <script src="../js/libs/custom-elements.min.js"></script>
       <script src="../js/libs/lit-html.js"></script>
       <!-- Required to polyfill modern browsers as code is ES5 for IE... -->
       <script src="../js/libs/custom-elements-es5-adapter.js" charset="utf-8" defer></script>
       <script src="../js/menu-wc.js" defer></script>

       <script src="../js/libs/bootstrap-native.js"></script>

       <script src="../js/libs/es6-shim.min.js"></script>
       <script src="../js/libs/EventDispatcher.js"></script>
       <script src="../js/libs/promise.min.js"></script>
       <script src="../js/libs/zepto.min.js"></script>

       <script src="../js/compodoc.js"></script>

       <script src="../js/tabs.js"></script>
       <script src="../js/menu.js"></script>
       <script src="../js/libs/clipboard.min.js"></script>
       <script src="../js/libs/prism.js"></script>
       <script src="../js/sourceCode.js"></script>
          <script src="../js/search/search.js"></script>
          <script src="../js/search/lunr.min.js"></script>
          <script src="../js/search/search-lunr.js"></script>
          <script src="../js/search/search_index.js"></script>
       <script src="../js/lazy-load-graphs.js"></script>


    </body>
</html>
